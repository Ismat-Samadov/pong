{"version":3,"sources":["turbopack:///[project]/src/components/admin/BranchCard.tsx/__nextjs-internal-proxy.mjs","turbopack:///[project]/src/app/admin/branches/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/admin/BranchCard.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/admin/BranchCard.tsx\",\n    \"default\",\n);\n","import { db } from '@/lib/db'\nimport BranchCard from '@/components/admin/BranchCard'\nimport Link from 'next/link'\n\nexport default async function BranchesPage() {\n  const branches = await db.branch.findMany({\n    include: {\n      _count: {\n        select: { feedbacks: true },\n      },\n    },\n    orderBy: { name: 'asc' },\n  })\n\n  const branchesWithStats = await Promise.all(\n    branches.map(async (branch) => {\n      const avgRating = await db.feedback.aggregate({\n        where: { branchId: branch.id },\n        _avg: { rating: true },\n      })\n\n      return {\n        ...branch,\n        feedbackCount: branch._count.feedbacks,\n        averageRating: avgRating._avg.rating || 0,\n      }\n    })\n  )\n\n  // Group by type\n  const branchesByType = branchesWithStats.reduce((acc, branch) => {\n    if (!acc[branch.type]) {\n      acc[branch.type] = []\n    }\n    acc[branch.type].push(branch)\n    return acc\n  }, {} as Record<string, typeof branchesWithStats>)\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-3xl font-bold\">Branches</h1>\n      </div>\n\n      {Object.entries(branchesByType).map(([type, branchList]) => (\n        <div key={type} className=\"space-y-4\">\n          <h2 className=\"text-2xl font-semibold border-b pb-2\">\n            {type} ({branchList.length})\n          </h2>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {branchList.map((branch) => (\n              <BranchCard key={branch.id} branch={branch} />\n            ))}\n          </div>\n        </div>\n      ))}\n    </div>\n  )\n}\n"],"names":[],"mappings":"sWAEe,CAAA,EAAA,AADf,EAAA,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,qSAAuS,EACpU,oEACA,8DAHW,CAAA,EADf,AACe,EADf,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,iRAAmR,EAChT,gDACA,mICLJ,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAGe,eAAe,IAC5B,IAAM,EAAW,MAAM,EAAA,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC,CACxC,QAAS,CACP,OAAQ,CACN,OAAQ,CAAE,WAAW,CAAK,CAC5B,CACF,EACA,QAAS,CAAE,KAAM,KAAM,CACzB,GAkBM,EAAiB,CAhBG,MAAM,QAAQ,GAAG,CACzC,EAAS,GAAG,CAAC,MAAO,IAClB,IAAM,EAAY,MAAM,EAAA,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,CAC5C,MAAO,CAAE,SAAU,EAAO,EAAE,AAAC,EAC7B,KAAM,CAAE,QAAQ,CAAK,CACvB,GAEA,MAAO,CACL,GAAG,CAAM,CACT,cAAe,EAAO,MAAM,CAAC,SAAS,CACtC,cAAe,EAAU,IAAI,CAAC,MAAM,EAAI,CAC1C,CACF,GAAA,EAIuC,MAAM,CAAC,CAAC,EAAK,KAChD,AAAC,CAAG,CAAC,EAAO,IAAI,CAAC,EAAE,CACrB,CAAG,CAAC,EAAO,IAAI,CAAC,CAAG,EAAE,AAAF,EAErB,CAAG,CAAC,EAAO,IAAI,CAAC,CAAC,IAAI,CAAC,GACf,GACN,CAAC,GAEJ,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6CACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8BAAqB,eAGpC,OAAO,OAAO,CAAC,GAAgB,GAAG,CAAC,CAAC,CAAC,EAAM,EAAW,GACrD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAe,UAAU,sBACxB,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,iDACX,EAAK,KAAG,EAAW,MAAM,CAAC,OAE7B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gEACZ,EAAW,GAAG,CAAC,AAAC,GACf,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAU,CAAA,CAAiB,OAAQ,GAAnB,EAAO,EAAE,OANtB,MAalB","ignoreList":[0]}