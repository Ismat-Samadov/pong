{"version":3,"sources":["turbopack:///[project]/src/components/admin/BranchMap.tsx/__nextjs-internal-proxy.mjs","turbopack:///[project]/src/app/admin/map/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/admin/BranchMap.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/admin/BranchMap.tsx\",\n    \"default\",\n);\n","import { db } from '@/lib/db'\nimport BranchMap from '@/components/admin/BranchMap'\n\nexport default async function MapPage() {\n  const branches = await db.branch.findMany({\n    include: {\n      _count: {\n        select: { feedbacks: true },\n      },\n    },\n  })\n\n  const branchesWithStats = await Promise.all(\n    branches.map(async (branch) => {\n      const avgRating = await db.feedback.aggregate({\n        where: { branchId: branch.id },\n        _avg: { rating: true },\n      })\n\n      return {\n        id: branch.id,\n        name: branch.name,\n        address: branch.address,\n        type: branch.type,\n        latitude: branch.latitude,\n        longitude: branch.longitude,\n        feedbackCount: branch._count.feedbacks,\n        averageRating: avgRating._avg.rating || 0,\n      }\n    })\n  )\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-3xl font-bold\">Branch Map</h1>\n        <div className=\"text-sm text-gray-600\">\n          Total Branches: {branches.length}\n        </div>\n      </div>\n\n      <div className=\"bg-white rounded-lg shadow overflow-hidden\">\n        <BranchMap branches={branchesWithStats} />\n      </div>\n\n      {/* Legend */}\n      <div className=\"bg-white rounded-lg shadow p-6\">\n        <h2 className=\"text-xl font-semibold mb-4\">Legend</h2>\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-6 h-6 rounded-full bg-blue-600\"></div>\n            <span>ATMs</span>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-6 h-6 rounded-full bg-green-600\"></div>\n            <span>Branches</span>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-6 h-6 rounded-full bg-orange-600\"></div>\n            <span>Payment Terminals</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"sWAEe,CAAA,EAAA,AADf,EAAA,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,oSAAsS,EACnU,mEACA,8DAHW,CAAA,EADf,AACe,EADf,CAAA,CAAA,OACe,uBAAA,AAAuB,EAClC,WAAa,MAAM,AAAI,MAAM,gRAAkR,EAC/S,+CACA,mICLJ,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,eAAe,IAC5B,IAAM,EAAW,MAAM,EAAA,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC,CACxC,QAAS,CACP,OAAQ,CACN,OAAQ,CAAE,WAAW,CAAK,CAC5B,CACF,CACF,GAEM,EAAoB,MAAM,QAAQ,GAAG,CACzC,EAAS,GAAG,CAAC,MAAO,IAClB,IAAM,EAAY,MAAM,EAAA,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,CAC5C,MAAO,CAAE,SAAU,EAAO,EAAE,AAAC,EAC7B,KAAM,CAAE,OAAQ,EAAK,CACvB,GAEA,MAAO,CACL,GAAI,EAAO,EAAE,CACb,KAAM,EAAO,IAAI,CACjB,QAAS,EAAO,OAAO,CACvB,KAAM,EAAO,IAAI,CACjB,SAAU,EAAO,QAAQ,CACzB,UAAW,EAAO,SAAS,CAC3B,cAAe,EAAO,MAAM,CAAC,SAAS,CACtC,cAAe,EAAU,IAAI,CAAC,MAAM,EAAI,CAC1C,CACF,IAGF,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8BAAqB,eACnC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kCAAwB,mBACpB,EAAS,MAAM,OAIpC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sDACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAS,CAAA,CAAC,SAAU,MAIvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2CACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,sCAA6B,WAC3C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCACf,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,YAER,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sCACf,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,gBAER,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uCACf,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,iCAMlB","ignoreList":[0]}